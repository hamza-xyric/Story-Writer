% Memoir PDF Template for Life Story System
% Version: 1.0
% Last Updated: 2024-12-25
%
% Usage with Pandoc:
%   pandoc --template memoir-pdf.tex --pdf-engine xelatex input.md -o output.pdf

\documentclass[11pt,a5paper]{book}

% ============================================
% Typography
% ============================================
\usepackage{fontspec}

% Primary fonts (fallbacks if Crimson Pro/Inter not installed)
\IfFontExistsTF{Crimson Pro}{
  \setmainfont{Crimson Pro}
}{
  \setmainfont{Georgia}
}

\IfFontExistsTF{Inter}{
  \setsansfont{Inter}
}{
  \setsansfont{Helvetica}
}

% ============================================
% Layout
% ============================================
\usepackage[
  margin=0.75in,
  top=1in,
  bottom=1in,
  bindingoffset=0.25in
]{geometry}

\usepackage{setspace}
\onehalfspacing

% ============================================
% Title Formatting
% ============================================
\usepackage{titlesec}

% Chapter styling - elegant memoir look
\titleformat{\chapter}[display]
  {\normalfont\Large\sffamily\bfseries}
  {\chaptertitlename\ \thechapter}{20pt}{\Huge}
\titlespacing*{\chapter}{0pt}{50pt}{40pt}

% Part styling - centered and prominent
\titleformat{\part}[display]
  {\centering\normalfont\Huge\sffamily}
  {\partname\ \thepart}{20pt}{\Huge}

% Section styling
\titleformat{\section}
  {\normalfont\large\sffamily\bfseries}
  {\thesection}{1em}{}

% ============================================
% Headers and Footers
% ============================================
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}  % Clear all
\fancyhead[LE,RO]{\thepage}
\fancyhead[RE]{\textit{$title$}}
\fancyhead[LO]{\textit{\leftmark}}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0pt}

% Plain style for chapter openings
\fancypagestyle{plain}{
  \fancyhf{}
  \fancyfoot[C]{\thepage}
  \renewcommand{\headrulewidth}{0pt}
}

% ============================================
% Decorative Elements
% ============================================
\usepackage{graphicx}

% Section break ornament
\newcommand{\sectionbreak}{%
  \begin{center}
    \vspace{1em}
    \textasteriskcentered\quad\textasteriskcentered\quad\textasteriskcentered
    \vspace{1em}
  \end{center}
}

% ============================================
% Front Matter
% ============================================
\usepackage{hyperref}
\hypersetup{
  pdftitle={$title$},
  pdfauthor={$author$},
  colorlinks=true,
  linkcolor=black,
  urlcolor=blue
}

% ============================================
% Document
% ============================================
\title{$title$}
\author{$author$}
\date{$date$}

\begin{document}

% Title Page
\begin{titlepage}
  \centering
  \vspace*{3cm}
  {\Huge\sffamily\bfseries $title$ \par}
  \vspace{1cm}
  $if(subtitle)$
  {\Large\itshape $subtitle$ \par}
  \vspace{2cm}
  $endif$
  {\Large $author$ \par}
  \vfill
  {\large $date$ \par}
\end{titlepage}

% Front matter (roman numerals)
\frontmatter

$if(toc)$
\tableofcontents
$endif$

% Main content (arabic numerals)
\mainmatter

$body$

% Back matter
\backmatter

\vfill
\begin{center}
\textit{This memoir was written with the help of StoryAI.}\\
\textit{Generated $date$}
\end{center}

\end{document}
